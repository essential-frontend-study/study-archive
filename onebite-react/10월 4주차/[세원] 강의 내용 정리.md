# ğŸ¯Â í•µì‹¬ ê°œë…
### Context :  ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ ì „ì²´ì— ë°ì´í„° ì œê³µí• ìˆ˜ìˆëŠ”  Reactì˜ ê¸°ëŠ¥. 


# ğŸ“Œ ê¸°ì¡´ì˜ ë¬¸ì œì 
### Prop Drilling
![[Pasted image 20251018182437.png]]
propsëŠ” ë¶€ëª¨ -> ìì‹ìœ¼ë¡œë§Œ ë°ì´í„° ì „ë‹¬ì´ ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ ë§Œì•½ì— depsê°€ ë” ê¹Šì–´ì§„ë‹¤í•œë‹¤ë©´, ë” ê¹Šì€ depsì˜ ì»´í¬ë„ŒíŠ¸ëŠ” ë¶€ëª¨ì˜ ìƒíƒœê°’ì„ ì•Œìˆ˜ì—†ê²Œ ëœë‹¤. ë¶€ëª¨ì˜ ìƒíƒœë¥¼ ì•Œë ¤ë©´ ê·¸ ë¶€ëª¨ì˜ ìì‹ì˜ ìì‹ì˜ ìì‹ì„ í†µí•´ì„œ ìƒíƒœë¥¼ ì „ë‹¬í•´ì¤˜ì•¼í•œë‹¤. ë§ˆì¹˜ ëì—†ì´ ë“œë¦´ì²˜ëŸ¼ ëš«ê³  ë‚´ë ¤ê°„ë‹¤ëŠ” ì˜ë¯¸ë¡œì„œ props drillingì´ë¼ê³  í•œë‹¤.

ê·¸ë˜ì„œ ëŒ€ì•ˆìœ¼ë¡œ ë‚˜ì˜¨ê²ƒì´  *Context* ì´ë‹¤.
ContextëŠ” ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ê·¸ ì•„ë˜ì˜ íŠ¸ë¦¬ ì „ì²´ì— ë°ì´í„°ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤€ë‹¤.

ê·¸ëŸ¼ contextì˜ ì‚¬ìš©ë²•ì„ ì•Œì•„ë³´ì.

# ğŸ› ï¸ ContextÂ ì‚¬ìš© ë°©ë²• (3ë‹¨ê³„)

### 1ë‹¨ê³„: Context ìƒì„±í•˜ê¸°
```javascript
import { createContext } from 'react';

//  ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ì„ ì–¸ì‹œ,ë¦¬ë Œë”ë§ ë ë•Œë§ˆë‹¤ ìƒì„±ë˜ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì— ì‘ì„±.
export const TodoContext = createContext(); // ê¸°ë³¸ê°’

export default function App(){
	const [todos, dispatch] = useReducer(reducer, mockData);
	const idRef = useRef(3);

  const onCreate = useCallback((content) => {
   ...
  }, []);

  const onUpdate = useCallback((targetId) => {
    ...
  }, []);

  const onDelete = useCallback((targetId) => {
    ...
  }, []);

  return (
    <div className="App">
      <Header />
        <Editor />
        <List />
    </div>
  );
}
```

2ë‹¨ê³„: Context ì œê³µ
```javascript
import { createContext } from 'react';

//  ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ì„ ì–¸ì‹œ,ë¦¬ë Œë”ë§ ë ë•Œë§ˆë‹¤ ìƒì„±ë˜ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì— ì‘ì„±.
export const TodoContext = createContext(); // ê¸°ë³¸ê°’

export default function App(){
	const [todos, dispatch] = useReducer(reducer, mockData);
	const idRef = useRef(3);

  const onCreate = useCallback((content) => {
   ...
  }, []);

  const onUpdate = useCallback((targetId) => {
    ...
  }, []);

  const onDelete = useCallback((targetId) => {
    ...
  }, []);

  return (
    <div className="App">
      <Header />
      // context.Provider(ê³µê¸‰ì)ë¥¼ ê°ì‹¸ë©´ Editor,List ì»´í¬ë„ŒíŠ¸ëŠ” TodoContextê°€ ì œ          ê³µí•˜ëŠ” ê°’ì„ ê³µê¸‰ ë°›ì„ìˆ˜ ìˆë‹¤.
   <TodoContext.Provider
        value={{
          todos,
          onCreate,
          onUpdate,
          onDelete,
        }}
      >
        <Editor />
        <List />
      </TodoContext.Provider>
    </div>
  );
}
```

ìœ„ ë‚´ìš©ì„ ì‚¬ì§„ìœ¼ë¡œ í‘œí˜„í•˜ìë©´ ì´ë ‡ë‹¤.

![[Pasted image 20251018185019.png]]

`TodoContext` ê°ì²´ê°€ ì œê³µí•œ `TodoContext.Provider`ì´ë¼ëŠ” ê³µê¸‰ìë¥¼ App ì»´í¬ë„ŒíŠ¸ ëŒ€ì‹  ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì„¤ì •í•œ ìƒíƒœì´ë‹¤. ì´ëŸ¬ë©´ `TodoContext.Provider`  ê°€ í¬í•¨í•œ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ëŠ” ë‹¤ì´ë ‰íŠ¸ë¡œ ë°ì´í„°ë¥¼ ì œê³µë°›ì„ìˆ˜ ìˆë‹¤.

ê°œë°œìë„êµ¬ì˜ ì»´í¬ë„ŒíŠ¸ íƒ­ì—ì„œ ë³´ë©´ 
![[Pasted image 20251018185719.png]]

Context.Providerê°€ ê³„ì¸µêµ¬ì¡°ì— ì¶”ê°€ëœê²ƒì„ í™•ì¸í• ìˆ˜ìˆê³ , valueë¡œì„œ ê³µê¸‰í•œ í•¨ìˆ˜ë“¤ì´ ë³´ì¸ë‹¤.

3ë‹¨ê³„: Context ë°ì´í„° ì½ê¸°

>ğŸ’¡ useContextëŠ” Hookì´ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ ìµœìƒë‹¨ì—ì„œë§Œ ì‚¬ìš©

```javascript
// useContext í˜¸ì¶œ
import { useRef, useState, useContext } from "react";
...

// 
import { TodoContext } from "../App";

const Editor = () => {
  // TodoContextë¥¼ ì¸ìˆ˜ë¡œ ë„£ê³  onCreate í•¨ìˆ˜ í˜¸ì¶œ
  const { onCreate } = useContext(TodoContext);
  const [content, setContent] = useState("");
  const inputRef = useRef();

  const onChangeContent = (e) => {
    setContent(e.target.value);
  };

  const onKeydown = (e) => {
    if (e.keyCode === 13) {
      onSubmit();
    }
  };

  const onSubmit = () => {
    if (content === "") {
      inputRef.current.focus();
      return;
    }
    onCreate(content);
    setContent("");
  };

  return (
    <div className="Editor">
      <input
        ref={inputRef}
        value={content}
        onChange={onChangeContent}
        onKeyDown={onKeydown}
        placeholder="ìƒˆë¡œìš´ Todo..."
      />
      <button onClick={onSubmit}>ì¶”ê°€</button>
    </div>
  );
};

export default Editor;
```

# ğŸ“Œ Context ë¶„ë¦¬í•˜ê¸°

ê¸°ì¡´ì˜ ì½”ë“œì—ì„œ `TodoItem`ì— React.memoë¥¼ ì‚¬ìš©í•´ì„œ todo propsê°€ ë³€ê²½ë˜ì§€ì•Šìœ¼ë©´ ë¦¬ë Œë”ë§ì´ ë˜ì§€ì•Šë„ë¡ ìµœì í™”ë¥¼ ì§„í–‰í–ˆì—ˆë‹¤. í•˜ì§€ë§Œ Contextë¥¼ ì‚¬ìš©í•¨ì— ë”°ë¼ ìµœì í™”ê°€ í’€ë¦°ê²ƒì„ ì•Œìˆ˜ìˆë‹¤. 

ì™œê·¸ëŸ´ê¹Œ?

ê·¸ ì´ìœ ëŠ”  `TodoContext` value props ì•ˆì˜  todo propsê°€ ì§ì ‘ì ìœ¼ë¡œ ë³€ê²½ë˜ì§€ì•Šì•„ë„ `onDelete`ë‚˜ `onCreate`, `onUpdate` ê°€ ë³€ê²½ ë  ê²½ìš°, `TodoContext` ê°ì²´ ìì²´ê°€ ì¬ìƒì„±ë˜ê¸° ë•Œë¬¸ì´ë‹¤.

ê·¸ëŸ¼ ì–´ë–»ê²Œí•´ì•¼í• ê¹Œ? 

![[Pasted image 20251018191941.png]]

ì´ë ‡ê²Œ ë³€ê²½ë ìˆ˜ìˆëŠ” ê°’ê³¼ ë³€ê²½ë˜ì§€ì•ŠëŠ” ê°’ì„ êµ¬ë¶„í•˜ì—¬ Contextë¥¼ ìƒì„±í•˜ì—¬ ê°ê° ê°ì‹¸ì£¼ë©´ëœë‹¤.

```javascript
import "./App.css";
import {
  ...
  createContext,
  useMemo,
} from "react";

...

export const TodoStateContext = createContext();
export const TodoDispatchContext = createContext();

function App() {
  const [todos, dispatch] = useReducer(reducer, mockData);
  const idRef = useRef(3);
  
  ...

  const memoizedDispatch = useMemo(() => {
    // useMemoë¥¼ ì‚¬ìš©í•´ì„œ ë§ˆìš´íŠ¸ ë˜ë©´ í•œë²ˆë§Œ ì‹¤í–‰í•˜ê²Œë” ì‘ì„±
    return { onCreate, onUpdate, onDelete };
  }, []);

  return (
    <div className="App">
      <Header />
      <TodoStateContext.Provider value={todos}>
        <TodoDispatchContext.Provider value={memoizedDispatch}>
          <Editor />
          <List />
        </TodoDispatchContext.Provider>
      </TodoStateContext.Provider>
    </div>
  );
}

export default App;
```

# ğŸ‘Contextê°€Â ì í•©í•œ ê²½ìš° (ì „ì—­ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê³µìœ í•´ì•¼í• ë•Œ )

- âœ… í…Œë§ˆ (ë‹¤í¬ëª¨ë“œ ë“±)

- âœ…Â í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì

- âœ… ë¼ìš°íŒ… ì •ë³´

- âœ… ì „ì—­ ìƒíƒœ ê´€ë¦¬

# ğŸ“ ê¸°ì–µí•  ì 

1. ContextëŠ” ì „ì—­ ë°ì´í„°ìš©ì´ì§€, ëª¨ë“ Â props ëŒ€ì²´ ìˆ˜ë‹¨ì´ ì•„ë‹ˆë‹¤.

2. Providerì˜ valueê°€ ë°”ë€Œë©´ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ìë™ìœ¼ë¡œ ë¦¬ë Œë”ë§ë©ë‹ˆë‹¤ (= Context.Provider ê°ì²´ê°€ ì¬ìƒì„±ë˜ê¸° ë•Œë¬¸)

3. ì—¬ëŸ¬ Contextë¥¼ ë™ì‹œì— ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ì„œë¡œ ë…ë¦½ì )


# âš ï¸ Contextì™€ useReducerì˜ ì°¨ì´

>Reactì˜Â Contextì™€Â useReducerëŠ” ì„œë¡œ ë‹¤ë¥¸ ëª©ì ì„ ê°€ì§„ ê¸°ëŠ¥

## í•µì‹¬ ì°¨ì´ì 

| íŠ¹ì§•  | Context      | useReducer   |
| --- | ------------ | ------------ |
| ëª©ì   | ìƒíƒœë¥¼ ì „ì—­ì ìœ¼ë¡œ ê³µìœ  | ë³µì¡í•œ ìƒíƒœ ë¡œì§Â ê´€ë¦¬ |
| ì—­í•   | "ë°ì´í„° ì „ë‹¬Â ë°©ì‹"  | "ìƒíƒœ ì—…ë°ì´íŠ¸ ë¡œì§" |
| ë¹„ìœ   | íƒë°° ë°°ì†¡Â ì‹œìŠ¤í…œ    | ì°½ê³  ê´€ë¦¬ ì‹œìŠ¤í…œ    |

ì˜ˆì‹œ 1 )

```javascript
// âŒ Context ì—†ì´ - prop drilling
function App() {
    const [user, setUser] = useState(null);
    
    return (
      <div>
        <Header user={user} />  {/* user ì „ë‹¬ */}
        <Main user={user} />     {/* user ì „ë‹¬ */}
        <Footer user={user} />   {/* user ì „ë‹¬ */}
      </div>
    );
  }
  
  // âœ… Context ì‚¬ìš© - ì§ì ‘ ì ‘ê·¼
  const UserContext = createContext();
  
  function App() {
    const [user, setUser] = useState(null);
    
    return (
      <UserContext.Provider value={user}>
        <Header />  {/* userë¥¼ propìœ¼ë¡œ ë°›ì§€ ì•ŠìŒ */}
        <Main />    {/* userë¥¼ propìœ¼ë¡œ ë°›ì§€ ì•ŠìŒ */}
        <Footer />  {/* userë¥¼ propìœ¼ë¡œ ë°›ì§€ ì•ŠìŒ */}
      </UserContext.Provider>
    );
  }
  
  function Header() {
    const user = useContext(UserContext); // ì§ì ‘ ì ‘ê·¼!
    return <div>{user.name}</div>;
  }
```

ì˜ˆì‹œ 2 )

```javascript
// âŒ useStateë¡œ ë³µì¡í•œ ë¡œì§ ê´€ë¦¬ (ë³µì¡í•¨)
function TodoApp() {
  const [todos, setTodos] = useState([]);
  const [filter, setFilter] = useState("all");

  const addTodo = (text) => {
    setTodos([...todos, { id: Date.now(), text, done: false }]);
  };

  const toggleTodo = (id) => {
    setTodos(
      todos.map((todo) =>
        todo.id === id ? { ...todo, done: !todo.done } : todo
      )
    );
  };

  const deleteTodo = (id) => {
    setTodos(todos.filter((todo) => todo.id !== id));
  };

  // ... ë” ë§ì€ í•¨ìˆ˜ë“¤
}

// âœ… useReducerë¡œ ê´€ë¦¬ (ê¹”ë”í•¨)
const initialState = { todos: [], filter: "all" };

function todoReducer(state, action) {
  switch (action.type) {
    case "ADD_TODO":
      return {
        ...state,
        todos: [
          ...state.todos,
          {
            id: Date.now(),
            text: action.text,
            done: false,
          },
        ],
      };
    case "TOGGLE_TODO":
      return {
        ...state,
        todos: state.todos.map((todo) =>
          todo.id === action.id ? { ...todo, done: !todo.done } : todo
        ),
      };
    case "DELETE_TODO":
      return {
        ...state,
        todos: state.todos.filter((todo) => todo.id !== action.id),
      };
    default:
      return state;
  }
}

function TodoApp() {
  const [state, dispatch] = useReducer(todoReducer, initialState);

  return (
    <div>
      <button onClick={() => dispatch({ type: "ADD_TODO", text: "ìƒˆ í• ì¼" })}>
        ì¶”ê°€
      </button>
      {/* ... */}
    </div>
  );
}

```

ì˜ˆì‹œ 3) í•¨ê»˜ ì‚¬ìš©í•˜ê¸° 

Contextì™€ useReducerë¥¼ í•¨ê»˜Â ì‚¬ìš©í•˜ë©´Â ì „ì—­ ìƒíƒœÂ ê´€ë¦¬ ì‹œìŠ¤í…œì„ ë§Œë“¤ ìˆ˜Â ìˆìŠµë‹ˆë‹¤.

```javascript
// 1. Reducer ì •ì˜
function themeReducer(state, action) {
  switch (action.type) {
    case "TOGGLE_THEME":
      return { ...state, theme: state.theme === "light" ? "dark" : "light" };
    case "SET_LANGUAGE":
      return { ...state, language: action.language };
    default:
      return state;
  }
}

// 2. Context ìƒì„±
const ThemeContext = createContext();

// 3. Provider ì»´í¬ë„ŒíŠ¸
function ThemeProvider({ children }) {
  const [state, dispatch] = useReducer(themeReducer, {
    theme: "light",
    language: "ko",
  });

  return (
    <ThemeContext.Provider value={{ state, dispatch }}>
      {children}
    </ThemeContext.Provider>
  );
}

// 4. ì‚¬ìš©
function App() {
  return (
    <ThemeProvider>
      <Header />
      <Main />
    </ThemeProvider>
  );
}

function Header() {
  const { state, dispatch } = useContext(ThemeContext);

  return (
    <div>
      <p>í˜„ì¬ í…Œë§ˆ: {state.theme}</p>
      <button onClick={() => dispatch({ type: "TOGGLE_THEME" })}>
        í…Œë§ˆ ë³€ê²½
      </button>
    </div>
  );
}

```


